{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ZUBAIR\\\\OneDrive\\\\Desktop\\\\Fact explorer\\\\frontend\\\\src\\\\components\\\\Admin.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Admin = () => {\n  _s();\n  const [facts, setFacts] = useState([]);\n\n  // Fetch all facts (including news)\n  const fetchFacts = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/facts');\n      setFacts(response.data);\n    } catch (err) {\n      console.error(\"Error fetching facts:\", err);\n    }\n  };\n  useEffect(() => {\n    fetchFacts();\n  }, []);\n  const deleteFact = async id => {\n    if (window.confirm(\"Admin: Delete this fact?\")) {\n      await axios.delete(`http://localhost:5000/api/facts/${id}`);\n      fetchFacts();\n    }\n  };\n\n  // üü¢ THIS IS THE FUNCTION THAT CALLS YOUR BACKEND\n  const fetchFromWeb = async () => {\n    try {\n      alert(\"Connecting to News API to fetch latest IPR news...\");\n      const res = await axios.post('http://localhost:5000/api/facts/fetch-news');\n      alert(res.data.message); // Show success message\n      fetchFacts(); // Refresh list instantly\n    } catch (err) {\n      alert(\"Failed to fetch news. Check console/backend.\");\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      borderTop: '5px solid #c0392b'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: '#c0392b'\n        },\n        children: \"\\u26A0\\uFE0F Admin Control Panel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Restricted Area: Manage Database & Fetch News\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/add\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toggle-btn btn-primary\",\n          children: \"\\u2795 Manually Add Fact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchFromWeb,\n        className: \"toggle-btn\",\n        style: {\n          backgroundColor: '#8e44ad',\n          color: 'white'\n        },\n        children: \"\\uD83C\\uDF0D Fetch Live News\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async () => {\n          if (window.confirm(\"Reset Database?\")) {\n            await axios.post('http://localhost:5000/api/facts/seed');\n            fetchFacts();\n          }\n        },\n        className: \"toggle-btn btn-reset\",\n        children: \"\\uD83D\\uDD04 Reset DB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        textAlign: 'center',\n        marginTop: '30px'\n      },\n      children: [\"Current Database Content (\", facts.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: facts.map(fact => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          borderTopColor: fact.ipr_type === 'News' ? '#8e44ad' : '#c0392b'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge\",\n              children: fact.ipr_type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                margin: '10px 0'\n              },\n              children: fact.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteFact(fact._id),\n            style: {\n              cursor: 'pointer',\n              background: 'none',\n              border: 'none',\n              fontSize: '20px'\n            },\n            children: \"\\uD83D\\uDDD1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 14\n        }, this)\n      }, fact._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(Admin, \"00cML/e5WsoY7CM/Z1LqoA34S9g=\");\n_c = Admin;\nexport default Admin;\nvar _c;\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jsxDEV","_jsxDEV","Admin","_s","facts","setFacts","fetchFacts","response","get","data","err","console","error","deleteFact","id","window","confirm","delete","fetchFromWeb","alert","res","post","message","className","style","borderTop","children","color","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","backgroundColor","textAlign","marginTop","length","map","fact","borderTopColor","ipr_type","display","justifyContent","alignItems","margin","title","_id","cursor","background","border","fontSize","_c","$RefreshReg$"],"sources":["C:/Users/ZUBAIR/OneDrive/Desktop/Fact explorer/frontend/src/components/Admin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Admin = () => {\r\n  const [facts, setFacts] = useState([]);\r\n\r\n  // Fetch all facts (including news)\r\n  const fetchFacts = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/facts');\r\n      setFacts(response.data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching facts:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { fetchFacts(); }, []);\r\n\r\n  const deleteFact = async (id) => {\r\n    if (window.confirm(\"Admin: Delete this fact?\")) {\r\n      await axios.delete(`http://localhost:5000/api/facts/${id}`);\r\n      fetchFacts();\r\n    }\r\n  };\r\n\r\n  // üü¢ THIS IS THE FUNCTION THAT CALLS YOUR BACKEND\r\n  const fetchFromWeb = async () => {\r\n    try {\r\n        alert(\"Connecting to News API to fetch latest IPR news...\");\r\n        const res = await axios.post('http://localhost:5000/api/facts/fetch-news');\r\n        alert(res.data.message); // Show success message\r\n        fetchFacts(); // Refresh list instantly\r\n    } catch (err) {\r\n        alert(\"Failed to fetch news. Check console/backend.\");\r\n        console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\" style={{ borderTop: '5px solid #c0392b' }}>\r\n      <header>\r\n        <h1 style={{ color: '#c0392b' }}>‚ö†Ô∏è Admin Control Panel</h1>\r\n        <p>Restricted Area: Manage Database & Fetch News</p>\r\n      </header>\r\n\r\n      <div className=\"button-group\">\r\n        <Link to=\"/add\">\r\n            <button className=\"toggle-btn btn-primary\">‚ûï Manually Add Fact</button>\r\n        </Link>\r\n        \r\n        {/* üü¢ HERE IS THE PURPLE FETCH BUTTON */}\r\n        <button onClick={fetchFromWeb} className=\"toggle-btn\" style={{ backgroundColor: '#8e44ad', color: 'white' }}>\r\n            üåç Fetch Live News\r\n        </button>\r\n\r\n        <button onClick={async () => { \r\n            if(window.confirm(\"Reset Database?\")) {\r\n                await axios.post('http://localhost:5000/api/facts/seed'); \r\n                fetchFacts(); \r\n            }\r\n        }} className=\"toggle-btn btn-reset\">\r\n          üîÑ Reset DB\r\n        </button>\r\n      </div>\r\n\r\n      <h3 style={{ textAlign: 'center', marginTop: '30px' }}>Current Database Content ({facts.length})</h3>\r\n      \r\n      <div className=\"grid\">\r\n        {facts.map((fact) => (\r\n          <div key={fact._id} className=\"card\" style={{ borderTopColor: fact.ipr_type === 'News' ? '#8e44ad' : '#c0392b' }}>\r\n             <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                    <span className=\"badge\">{fact.ipr_type}</span>\r\n                    <h4 style={{ margin: '10px 0' }}>{fact.title}</h4>\r\n                </div>\r\n                <button onClick={() => deleteFact(fact._id)} style={{ cursor: 'pointer', background: 'none', border: 'none', fontSize: '20px' }}>\r\n                    üóëÔ∏è\r\n                </button>\r\n             </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}